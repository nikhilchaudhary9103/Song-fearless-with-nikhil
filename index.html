<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Music by Nikhil</title>
  <style>
    :root{
      --bg1:#0f172a;
      --accent:#00e5a8;
      --glass: rgba(255,255,255,0.06);
      --soft:#e6f7ff;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Segoe UI", Inter, system-ui, sans-serif;
      background: radial-gradient(1200px 600px at 10% 20%, rgba(99,102,241,0.12), transparent),
                  radial-gradient(900px 500px at 90% 80%, rgba(255,99,132,0.07), transparent),
                  linear-gradient(135deg,#071029 0%, #0b1220 100%);
      color:var(--soft);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      -webkit-tap-highlight-color: transparent;
      user-select:none;
    }

    .card{
      width:min(920px,96vw);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:20px;
      padding:28px;
      box-shadow: 0 10px 40px rgba(2,6,23,0.6);
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:24px;
      align-items:center;
      backdrop-filter: blur(6px) saturate(110%);
    }

    .logo-wrap{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:18px;
    }
    /* canvas logical size controlled by JS; keep CSS for layout */
    #nameCanvas{
      width:260px;
      height:260px;
      border-radius:50%;
      background: linear-gradient(145deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      box-shadow: inset 0 6px 30px rgba(0,0,0,0.6), 0 8px 40px rgba(0,0,0,0.5);
      touch-action: manipulation;
    }

    .meta{
      display:flex;
      flex-direction:column;
      gap:12px;
      padding-right:6px;
    }
    .title{
      font-size:20px;
      letter-spacing:1px;
      color:#fff;
      opacity:0.98;
      margin:0;
    }
    .subtitle{
      font-size:13px;
      color:#d6e6f4;
      opacity:0.75;
      margin:0;
    }

    .controls{
      margin-top:8px;
      display:flex;
      gap:12px;
      align-items:center;
    }

    .btn{
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.04);
      padding:10px 14px;
      border-radius:12px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-weight:600;
      color:var(--soft);
      box-shadow: 0 6px 20px rgba(2,6,23,0.45);
    }
    .btn:active{transform:translateY(1px)}
    .big{
      padding:12px 18px;
      font-size:16px;
    }

    .progress{
      width:100%;
      height:10px;
      background:rgba(255,255,255,0.04);
      border-radius:999px;
      overflow:hidden;
      margin-top:14px;
      cursor:pointer;
    }
    .progress > .bar{
      height:100%;
      width:0%;
      background: linear-gradient(90deg,var(--accent), #6EE7B7);
      border-radius:999px;
      transition: width 0.12s linear;
    }

    .small{
      font-size:13px;
      color: #cfeff0;
      opacity:0.85;
    }

    .tap-overlay{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background: linear-gradient(180deg, rgba(2,6,23,0.65), rgba(2,6,23,0.35));
      z-index:999;
      transition: opacity 0.35s ease, transform 0.35s ease;
      user-select:none;
    }
    .tap-overlay.hidden{opacity:0;pointer-events:none;transform:scale(1.02)}
    .tap-card{
      text-align:center;
      padding:22px 28px;
      border-radius:14px;
      background:rgba(255,255,255,0.03);
      box-shadow:0 8px 40px rgba(0,0,0,0.6);
    }
    .tap-card h2{margin:0 0 6px 0;font-size:20px}
    .tap-card p{margin:0;font-size:13px;color:rgba(220,240,255,0.9)}
    .hint{font-size:12px;opacity:0.7;margin-top:8px}

    footer{
      margin-top:18px;
      grid-column: 1 / -1;
      font-size:12px;
      color:rgba(210,230,245,0.6);
      text-align:center;
    }

    @media (max-width:740px){
      .card{grid-template-columns:1fr; padding:18px}
      #nameCanvas{width:200px;height:200px}
    }
  </style>
</head>
<body>
  <div id="tapOverlay" class="tap-overlay" aria-hidden="false">
    <div class="tap-card" role="button" tabindex="0">
      <h2>Tap anywhere to start</h2>
      <p>Touch/koi bhi click kar ‚Äî song play ho jayega. Phir controls mil jayenge.</p>
      <div class="hint"> (Privacy: file stays on your device) </div>
    </div>
  </div>

  <main class="card" role="main">
    <div class="logo-wrap" aria-hidden="true">
      <canvas id="nameCanvas" aria-label="NIKHIL logo"></canvas>
      <!-- removed copy-protected text and added a tasteful tagline -->
      <div class="small">Authentic sounds ‚Äî crafted by Nikhil</div>
    </div>

    <div class="meta">
      <h1 class="title">Music by Nikhil</h1>
      <!-- upgraded subtitle / 'next level' play line -->
      <p class="subtitle">Bold, cinematic beats ‚Äî tap to ignite a listening journey. Straight from Nikhil's studio to your ears.</p>

      <div class="controls" id="controlsRow" aria-hidden="true">
        <button id="playBtn" class="btn big" aria-pressed="false">‚ñ∂ Play ‚Äî Feel the Drop</button>
        <button id="pauseBtn" class="btn" style="display:none">‚è∏ Pause</button>
        <div style="display:flex;align-items:center;gap:8px;width:100%;">
          <div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" tabindex="0" title="Seek">
            <div class="bar" id="progressBar"></div>
          </div>
          <div style="width:8px"></div>
          <button id="muteBtn" class="btn" title="Mute / unmute">üîä</button>
        </div>
      </div>

      <div id="timeInfo" style="margin-top:8px;display:none" class="small">00:00 / 00:00</div>

      <footer>Designed for a clean listening moment ‚Äî Nikhil</footer>
    </div>
  </main>

  <audio id="player" preload="metadata" src="song1.mp3"></audio>

  <script>
    // ====== Clean canvas drawing with proper DPR handling (glitch fixed) ======
    (function drawCanvas(){
      const canvas = document.getElementById('nameCanvas');
      const ctx = canvas.getContext('2d');
      const DPR = Math.max(1, window.devicePixelRatio || 1);

      // desired logical size (match CSS)
      const logicalSize = parseInt(getComputedStyle(canvas).width, 10) || 260;

      // set bitmap size for crisp drawing
      canvas.width = logicalSize * DPR;
      canvas.height = logicalSize * DPR;
      canvas.style.width = logicalSize + 'px';
      canvas.style.height = logicalSize + 'px';
      ctx.scale(DPR, DPR);

      // center / radius values use logical coords
      const w = logicalSize;
      const h = logicalSize;
      const cx = w / 2;
      const cy = h / 2;
      const r = Math.min(w, h) / 2 - 12;

      // background radial
      const g = ctx.createLinearGradient(0,0,w,h);
      g.addColorStop(0, '#0b1220');
      g.addColorStop(1, '#061226');
      ctx.fillStyle = g;
      ctx.fillRect(0,0,w,h);

      // outer glow ring
      const ring = ctx.createRadialGradient(cx, cy, r*0.25, cx, cy, r);
      ring.addColorStop(0, 'rgba(0,229,168,0.14)');
      ring.addColorStop(0.6, 'rgba(0,229,168,0.06)');
      ring.addColorStop(1, 'rgba(255,255,255,0.02)');
      ctx.beginPath();
      ctx.arc(cx, cy, r, 0, Math.PI*2);
      ctx.fillStyle = ring;
      ctx.fill();

      // center circle glossy
      ctx.beginPath();
      ctx.arc(cx, cy, r - 18, 0, Math.PI*2);
      ctx.fillStyle = 'rgba(6,9,30,0.6)';
      ctx.fill();

      // subtle ring stroke
      ctx.beginPath();
      ctx.arc(cx, cy, r - 10, 0, Math.PI*2);
      ctx.strokeStyle = 'rgba(0,229,168,0.08)';
      ctx.lineWidth = 6;
      ctx.stroke();

      // name text (stylized)
      const name = 'N I K H I L';
      ctx.font = 'bold 46px system-ui, "Segoe UI"';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      const tg = ctx.createLinearGradient(0,0,w,h);
      tg.addColorStop(0,'#A0FFF0');
      tg.addColorStop(1,'#64D2A3');
      ctx.fillStyle = tg;
      ctx.shadowColor = 'rgba(0,230,160,0.16)';
      ctx.shadowBlur = 18;
      ctx.fillText(name, cx, cy - 6);

      // small subtitle on canvas
      ctx.shadowBlur = 0;
      ctx.font = '500 12px system-ui';
      ctx.fillStyle = 'rgba(220,240,255,0.65)';
      ctx.fillText('Handmade ‚Ä¢ Studio mix', cx, cy + 34);
    })();

    // ====== Audio + controls logic (minor UX fixes) ======
    const player = document.getElementById('player');
    const playBtn = document.getElementById('playBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const muteBtn = document.getElementById('muteBtn');
    const progressBar = document.getElementById('progressBar');
    const controlsRow = document.getElementById('controlsRow');
    const timeInfo = document.getElementById('timeInfo');
    const overlay = document.getElementById('tapOverlay');
    const progressWrap = document.querySelector('.progress');

    let userInteracted = false;
    let raf;

    function fmt(t){
      if (!isFinite(t)) return '00:00';
      const mm = Math.floor(t/60).toString().padStart(2,'0');
      const ss = Math.floor(t%60).toString().padStart(2,'0');
      return mm + ':' + ss;
    }

    function updateProgress(){
      const pct = (player.currentTime / Math.max(0.0001, player.duration)) * 100;
      progressBar.style.width = pct + '%';
      timeInfo.textContent = fmt(player.currentTime) + ' / ' + (isFinite(player.duration)? fmt(player.duration) : '00:00');
      timeInfo.style.display = 'block';
      if (raf) cancelAnimationFrame(raf);
      raf = requestAnimationFrame(updateProgress);
    }

    function handlePlay(){
      player.play().catch(e=>{
        console.warn('play blocked', e);
      });
      playBtn.style.display='none';
      pauseBtn.style.display='inline-flex';
      playBtn.setAttribute('aria-pressed','true');
      controlsRow.setAttribute('aria-hidden','false');
      if (raf) cancelAnimationFrame(raf);
      raf = requestAnimationFrame(updateProgress);
    }
    function handlePause(){
      player.pause();
      pauseBtn.style.display='none';
      playBtn.style.display='inline-flex';
      playBtn.setAttribute('aria-pressed','false');
      if (raf) cancelAnimationFrame(raf);
    }

    function firstTap(){
      if(userInteracted) return;
      userInteracted = true;
      player.volume = 0.9;
      handlePlay();
      overlay.classList.add('hidden');
      overlay.setAttribute('aria-hidden','true');
      controlsRow.style.visibility='visible';
      controlsRow.style.opacity='1';
      controlsRow.setAttribute('aria-hidden','false');
    }

    overlay.addEventListener('click', firstTap, {passive:true});
    overlay.addEventListener('touchstart', firstTap, {passive:true});
    document.addEventListener('click', (e)=>{ if(!userInteracted) firstTap(); }, {passive:true});
    document.addEventListener('touchstart', (e)=>{ if(!userInteracted) firstTap(); }, {passive:true});

    playBtn.addEventListener('click', handlePlay);
    pauseBtn.addEventListener('click', handlePause);

    muteBtn.addEventListener('click', ()=>{
      player.muted = !player.muted;
      muteBtn.textContent = player.muted ? 'üîà' : 'üîä';
    });

    // progress seek (supports touch + click)
    function seekFromEvent(e){
      const rect = progressWrap.getBoundingClientRect();
      const clientX = (e.touches && e.touches[0]) ? e.touches[0].clientX : e.clientX;
      const x = clientX - rect.left;
      const pct = Math.max(0, Math.min(1, x / rect.width));
      if (isFinite(player.duration)) player.currentTime = pct * player.duration;
      updateProgress();
    }
    progressWrap.addEventListener('click', seekFromEvent);
    progressWrap.addEventListener('touchstart', (e)=> { seekFromEvent(e); }, {passive:true});
    // keyboard accessible seek (arrow left/right)
    progressWrap.addEventListener('keydown', (e)=>{
      if (!isFinite(player.duration)) return;
      const step = Math.max(1, Math.floor(player.duration / 20));
      if (e.key === 'ArrowRight') { player.currentTime = Math.min(player.duration, player.currentTime + step); updateProgress(); }
      if (e.key === 'ArrowLeft') { player.currentTime = Math.max(0, player.currentTime - step); updateProgress(); }
    });

    player.addEventListener('loadedmetadata', ()=>{
      timeInfo.textContent = fmt(player.currentTime) + ' / ' + (isFinite(player.duration)? fmt(player.duration) : '00:00');
    });

    player.addEventListener('ended', ()=>{
      handlePause();
      player.currentTime = 0;
    });

    // disable contextmenu & copy only on canvas area
    const canvas = document.getElementById('nameCanvas');
    canvas.addEventListener('contextmenu', (e)=> e.preventDefault());
    canvas.addEventListener('copy', (e)=> e.preventDefault());

    function showTempHint(msg){
      const d = document.createElement('div');
      d.textContent = msg;
      d.style.position='fixed';
      d.style.bottom='24px';
      d.style.left='50%';
      d.style.transform='translateX(-50%)';
      d.style.padding='10px 14px';
      d.style.background='rgba(0,0,0,0.6)';
      d.style.color='#dff';
      d.style.borderRadius='10px';
      d.style.zIndex=9999;
      document.body.appendChild(d);
      setTimeout(()=> d.style.opacity='0',1500);
      setTimeout(()=> d.remove(),2200);
    }

    // keep controls hidden until first tap
    controlsRow.style.visibility='hidden';
    controlsRow.style.opacity='0';
    controlsRow.style.transition='opacity 0.35s ease, visibility 0.35s';

    // try to pre-load metadata / blob (won't auto-play)
    player.load();

    // resume attempt on visibility change if playing
    window.addEventListener('visibilitychange', ()=>{
      if (document.visibilityState === 'visible' && userInteracted && !player.paused) {
        player.play().catch(()=>{});
      }
    });
  </script>
</body>
            </html>
